import{ab as r,H as l,I as i,G as e,V as t,O as a,ac as n,Y as d}from"./framework-c2f60e5e.js";const c={},s=e("h1",{id:"_2023-04-18-第六周-04-25-第七周",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#_2023-04-18-第六周-04-25-第七周","aria-hidden":"true"},"#"),t(" 2023-04-18-第六周 / 04-25-第七周")],-1),h=e("h2",{id:"baby-bc",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#baby-bc","aria-hidden":"true"},"#"),t(" baby.bc")],-1),m={href:"https://llvm.org/docs/BitCodeFormat.html",target:"_blank",rel:"noopener noreferrer"},u={href:"https://llvm.org/docs/index.html",target:"_blank",rel:"noopener noreferrer"},p={href:"https://llvm.org/docs/BitCodeFormat.html%23bitstream-format",target:"_blank",rel:"noopener noreferrer"},g=n('<p>整个bitcode和包装格式都是采用小端字节序，每32个比特为一组，称为一个word。</p><blockquote><p>举例来说，数值<code>0x2211</code>使用两个字节储存：高位字节是<code>0x22</code>，低位字节是<code>0x11</code>。</p><blockquote><ul><li><strong>大端字节序</strong>：高位字节在前，低位字节在后，这是人类读写数值的方法。</li><li><strong>小端字节序</strong>：低位字节在前，高位字节在后，即以<code>0x1122</code>形式储存。</li></ul><figure><img src="http://picgo-1258675557.cos.accelerate.myqcloud.com/202305020050256.jpeg?imageMogr2/quality/70/strip|watermark/2/text/wqkgMHhmLiBEYWFpaGFuZyBXb25n/font/U1RIZWl0aSBMaWdodOWNjuaWh-m7keS9ky50dGM/fontsize/18/fill/I2ZmZmZmZg/dissolve/70/shadow/40/gravity/southeast/dx/10/dy/10|watermark/3/type/3/text/V2FuZ0RhaGVuZ0RhYWloYW5nV29uZ1dESA" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>为什么会有小端字节序？计算机电路先处理低位字节，效率比较高，因为计算都是从低位开始的。所以，计算机的内部处理都是小端字节序。</p><p>但是，人类还是习惯读写大端字节序。所以，除了计算机的内部处理，其他的场合几乎都是大端字节序，比如网络传输和文件储存。</p></blockquote></blockquote>',2),_={href:"https://llvm.org/docs/BitCodeFormat.html%23bitcode-wrapper-format",target:"_blank",rel:"noopener noreferrer"},f=e("figure",null,[e("img",{src:"http://picgo-1258675557.cos.accelerate.myqcloud.com/202305020102736.png?imageMogr2/quality/70/strip|watermark/2/text/wqkgMHhmLiBEYWFpaGFuZyBXb25n/font/U1RIZWl0aSBMaWdodOWNjuaWh-m7keS9ky50dGM/fontsize/18/fill/I2ZmZmZmZg/dissolve/70/shadow/40/gravity/southeast/dx/10/dy/10|watermark/3/type/3/text/V2FuZ0RhaGVuZ0RhYWloYW5nV29uZ1dESA",alt:"",tabindex:"0",loading:"lazy"}),e("figcaption")],-1),b=e("p",null,[e("strong",null,[t("目前可以得出，魔数是：0xDEC04342（如果按大端排序看起开有个"),e("code",null,"code"),t("字符），版本号：0x1435，bitcode偏移量是0x05，字节数是0x24300C62，CPU类型是0xE6BE5949。header之后紧接着就是bitcode数据。")])],-1),y=e("hr",null,null,-1),Z={href:"https://zhuanlan.zhihu.com/p/308201373",target:"_blank",rel:"noopener noreferrer"},k=e("p",null,"但是gcc编译出了点问题，决定下次看题再解决一下。",-1),x=e("figure",null,[e("img",{src:"http://picgo-1258675557.cos.accelerate.myqcloud.com/202305020129708.png?imageMogr2/quality/70/strip|watermark/2/text/wqkgMHhmLiBEYWFpaGFuZyBXb25n/font/U1RIZWl0aSBMaWdodOWNjuaWh-m7keS9ky50dGM/fontsize/18/fill/I2ZmZmZmZg/dissolve/70/shadow/40/gravity/southeast/dx/10/dy/10|watermark/3/type/3/text/V2FuZ0RhaGVuZ0RhYWloYW5nV29uZ1dESA",alt:"",tabindex:"0",loading:"lazy"}),e("figcaption")],-1),W=e("figure",null,[e("img",{src:"http://picgo-1258675557.cos.accelerate.myqcloud.com/202305020129431.png?imageMogr2/quality/70/strip|watermark/2/text/wqkgMHhmLiBEYWFpaGFuZyBXb25n/font/U1RIZWl0aSBMaWdodOWNjuaWh-m7keS9ky50dGM/fontsize/18/fill/I2ZmZmZmZg/dissolve/70/shadow/40/gravity/southeast/dx/10/dy/10|watermark/3/type/3/text/V2FuZ0RhaGVuZ0RhYWloYW5nV29uZ1dESA",alt:"",tabindex:"0",loading:"lazy"}),e("figcaption")],-1);function B(V,M){const o=d("ExternalLinkIcon");return l(),i("div",null,[s,h,e("p",null,[t("用file命令看了文件，发现是个LLVM文件。"),e("a",m,[t("Bitcode"),a(o)]),t("是"),e("a",u,[t("LLVM"),a(o)]),t(" IR的二进制形式。看来这个形式与Bitcode有关。")]),e("p",null,[t("Bitcode本质上就是一个比特序列，或者叫做"),e("a",p,[t("比特流"),a(o)]),t("。LLVM 编译器基础结构支持广泛的项目，从 工业强度编译器到专用 JIT 应用程序到小型 研究项目。")]),g,e("p",null,[t("*.bc文件实际上是"),e("a",_,[t("bitcode包装格式"),a(o)]),t("，其内容主要分为两部分：header和body。文件开头的20个字节是header，真正的bitcode数据则是body。Header的内容是5个32比特整数，依次表示魔数、版本号、bitcode偏移量（单位是字节）、bitcode字节数、CPU类型。")]),f,b,y,e("p",null,[t("目前是读了"),e("a",Z,[t("LLVM Bitcode格式介绍（一） - 知乎 (zhihu.com)"),a(o)]),t("这篇文章，基本没有读懂。但是发现可以按照这个方法用010看懂llvm的结构，似乎没法继续用这种方法继续读懂程序，并且题目中需要我的input，那必然要看源代码。遂看了WP（也没搞懂）。大致需要转成.s文件，然后重新转回.c文件用ida分析。")]),k,x,W])}const q=r(c,[["render",B],["__file","Week-06.html.vue"]]);export{q as default};
